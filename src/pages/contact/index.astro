---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Header from "../../components/Header.astro";

const title = "Contact — Cassandra Michel";
const description = "Contacter Cassandra Michel pour une question ou un besoin SEO (audit, accompagnement, livrables).";
---

<BaseLayout title={title} description={description}>
  <Header />

  <main>
    <h1>Contact</h1>
    <p class="intro">
      Pour une question, un retour sur un projet, ou une demande de collaboration SEO.
    </p>

    <section class="card" style="padding: 1rem;">
      <form
        class="contact-form"
        name="contact"
        method="POST"
        data-netlify="true"
        data-netlify-honeypot="bot-field"
        action="/contact/merci"
      >

        {/* Obligatoire pour Netlify */}
        <input type="hidden" name="form-name" value="contact" />

        {/* Honeypot anti-spam */}
        <p class="honeypot" aria-hidden="true">
          <label>
            Ne pas remplir ce champ :
              <input
                type="text"
                name="bot-field"
                tabindex="-1"
                autocomplete="new-password"
                inputmode="none"
              />
          </label>
        </p>


        <div style="display:grid; gap: 0.75rem;">
          <label>
            Nom
            <input name="name" type="text" autocomplete="name" required />
          </label>

          <label>
            Email
            <input name="email" type="email" autocomplete="email" required />
          </label>

          <label>
            Sujet
            <input name="subject" type="text" required />
          </label>

          <label>
            Message
            <textarea name="message" rows="7" required></textarea>
          </label>

          <button class="btn" type="submit">Envoyer</button>
        </div>
      </form>
    </section>

    <p style="margin-top: 1rem; color: var(--muted);">
      Réponse généralement sous 24–72h.
      <br />
      Email direct : <a href="mailto:heinui.cassandra@gmail.com">heinui.cassandra@gmail.com</a>
    </p>

    <script is:inline>
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.querySelector("form.contact-form");
        if (!form) return;

        const fields = form.querySelectorAll("input, textarea, select");

        /** @param {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} el */
        const syncField = (el) => {
          el.dispatchEvent(new Event("input", { bubbles: true }));
          el.dispatchEvent(new Event("change", { bubbles: true }));
          el.dispatchEvent(new Event("blur", { bubbles: true }));
        };

        form.addEventListener("submit", () => {
          fields.forEach(syncField);
        });

        fields.forEach((el) => {
          el.addEventListener("focus", () => syncField(el));
        });
      });
    </script>

  </main>
</BaseLayout>
